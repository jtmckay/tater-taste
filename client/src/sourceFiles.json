{
  "/home/taylor/GitHub/tater-taste/client/src/App": {
    "fileName": "/home/taylor/GitHub/tater-taste/client/src/App.tsx",
    "text": "import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Home from './views/Home'\n\nReactDOM.render(\n  <Home />,\n  document.getElementById('app')\n)\n",
    "modules": [
      "/home/taylor/GitHub/tater-taste/client/src/views/Home/index.tsx"
    ],
    "statements": [
      {
        "pos": 0,
        "end": 25,
        "name": "react",
        "type": "module"
      },
      {
        "pos": 25,
        "end": 58,
        "name": "react-dom",
        "type": "module"
      },
      {
        "pos": 58,
        "end": 90,
        "name": "./views/Home",
        "type": "module"
      }
    ]
  },
  "/home/taylor/GitHub/tater-taste/client/src/views/Home": {
    "fileName": "/home/taylor/GitHub/tater-taste/client/src/views/Home/index.tsx",
    "text": "import React from 'react'\nimport { css } from '@emotion/css'\nimport Explorer from '../../components/Explorer'\nimport fileGraph from '../../fileGraph.json'\nimport sourceFiles from '../../sourceFiles.json'\n\nexport default function Home () {\n  return (\n    <div className={css`\n      min-width: 800px;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n    `}>\n      <h1 className={css`text-align: center;`}>Tater - TypeScript Abstract Syntax Tree Explorer</h1>\n      <Explorer fileGraph={fileGraph} sourceFileKeyMap={sourceFiles} />\n    </div>\n  )\n}\n",
    "modules": [
      "/home/taylor/GitHub/tater-taste/client/src/components/Explorer/index.tsx"
    ],
    "statements": [
      {
        "pos": 0,
        "end": 25,
        "name": "react",
        "type": "module"
      },
      {
        "pos": 25,
        "end": 60,
        "name": "@emotion/css",
        "type": "module"
      },
      {
        "pos": 60,
        "end": 109,
        "name": "../../components/Explorer",
        "type": "module"
      },
      {
        "pos": 109,
        "end": 154,
        "name": "../../fileGraph.json",
        "type": "module"
      },
      {
        "pos": 154,
        "end": 203,
        "name": "../../sourceFiles.json",
        "type": "module"
      },
      {
        "pos": 203,
        "end": 567,
        "name": "Home",
        "type": "statement"
      }
    ]
  },
  "/home/taylor/GitHub/tater-taste/client/src/components/Explorer": {
    "fileName": "/home/taylor/GitHub/tater-taste/client/src/components/Explorer/index.tsx",
    "text": "import React, { useState } from 'react'\nimport { css } from '@emotion/css'\nimport TextField from '@mui/material/TextField';\nimport { FileGraph, SourceFileKeyMap } from '../../../../ast/generateAST'\nimport ExploreItem from '../ExploreItem'\nimport { getFileNameWithoutExtension, searchSourceFileText } from '../../utils/sourceFileHelpers'\nimport FabricCanvas from '../FabricCanvas'\nimport SearchResult from '../SearchResult';\n\nlet searchTimerThrottleId\n\nexport default function Explorer ({ fileGraph, sourceFileKeyMap }: { fileGraph: FileGraph, sourceFileKeyMap: SourceFileKeyMap}) {\n  const [fabricCanvas, setFabricCanvas] = useState()\n  const [pointerState, setPointerState] = useState()\n  const [searchText, setSearchText] = useState('')\n  const [searchResults, setSearchResults] = useState<string[]>([])\n\n  function expandSearchResult (moduleName: string) {\n    if (searchResults.includes(moduleName)) {\n      return\n    }\n    const newSearchResults = [...searchResults]\n    newSearchResults.push(moduleName)\n    setSearchResults(newSearchResults)\n  }\n  function removeSearchResult (moduleName: string) {\n    const newSearchResults = [...searchResults].filter(i => i !== moduleName)\n    setSearchResults(newSearchResults)\n  }\n\n  return (\n    <div className={css`\n      display: flex;\n      position: relative;\n      flex-direction: column;\n      flex-grow: 1;\n    `}>\n      <TextField id=\"outlined-basic\" label=\"Search\" variant=\"outlined\" onChange={event => setSearchText(event.target.value)} onKeyPress={key => {\n        function search () {\n          setSearchResults(searchSourceFileText(sourceFileKeyMap, searchText))\n        }\n        if (key.key === 'Enter' && searchText.length) {\n          clearTimeout(searchTimerThrottleId)\n          search()\n        } else {\n          clearTimeout(searchTimerThrottleId)\n          searchTimerThrottleId = setTimeout(search, 500)\n        }\n      }} />\n      <FabricCanvas registerFabricCanvas={fabricCanvas => setFabricCanvas(fabricCanvas)}\n        registerPointerState={pointerState => setPointerState(pointerState)} />\n      <ExploreItem\n        sourceFileKeyMap={sourceFileKeyMap}\n        fabricCanvas={fabricCanvas}\n        pointerState={pointerState}\n        sourceFile={sourceFileKeyMap[getFileNameWithoutExtension(sourceFileKeyMap, fileGraph.fileName)]} />\n      {searchText && <div className={css`\n        position: absolute;\n        top: 56px;\n        left: 10px;\n        background: lightgray;\n        opacity: 80%;\n      `}>\n        {searchResults.map(searchResult => {\n          return (\n            <SearchResult key={searchResult} sourceFile={sourceFileKeyMap[getFileNameWithoutExtension(sourceFileKeyMap, searchResult)]} expandModule={expandSearchResult} collapseModule={removeSearchResult} />\n          )\n        })}\n      </div>}\n    </div>\n  )\n}\n",
    "modules": [
      "/home/taylor/GitHub/tater-taste/ast/generateAST.ts",
      "/home/taylor/GitHub/tater-taste/client/src/components/ExploreItem/index.tsx",
      "/home/taylor/GitHub/tater-taste/client/src/utils/sourceFileHelpers.ts",
      "/home/taylor/GitHub/tater-taste/client/src/components/FabricCanvas/index.tsx",
      "/home/taylor/GitHub/tater-taste/client/src/components/SearchResult/index.tsx"
    ],
    "statements": [
      {
        "pos": 0,
        "end": 39,
        "name": "react",
        "type": "module"
      },
      {
        "pos": 39,
        "end": 74,
        "name": "@emotion/css",
        "type": "module"
      },
      {
        "pos": 74,
        "end": 123,
        "name": "@mui/material/TextField",
        "type": "module"
      },
      {
        "pos": 123,
        "end": 197,
        "name": "../../../../ast/generateAST",
        "type": "module"
      },
      {
        "pos": 197,
        "end": 238,
        "name": "../ExploreItem",
        "type": "module"
      },
      {
        "pos": 238,
        "end": 336,
        "name": "../../utils/sourceFileHelpers",
        "type": "module"
      },
      {
        "pos": 336,
        "end": 379,
        "name": "../FabricCanvas",
        "type": "module"
      },
      {
        "pos": 379,
        "end": 423,
        "name": "../SearchResult",
        "type": "module"
      },
      {
        "pos": 423,
        "end": 450,
        "name": "searchTimerThrottleId",
        "type": "declaration"
      },
      {
        "pos": 450,
        "end": 2809,
        "name": "Explorer",
        "type": "statement"
      }
    ]
  },
  "/home/taylor/GitHub/tater-taste/ast/generateAST": {
    "fileName": "/home/taylor/GitHub/tater-taste/ast/generateAST.ts",
    "text": "import { existsSync } from 'fs';\nimport { join } from 'path';\nimport ts = require('typescript');\n\nconst logging = false;\n\nconst tsConfigCompilerOptions = {\n  moduleResolution: 2,\n  noImplicitAny: false,\n  target: 2,\n};\n\nexport function generateAST(entryPoint?: string, tsConfigPath?: string): { sourceFiles: SourceFileKeyMap, fileGraph: FileGraph } {\n  const entryFilePath = join(process.cwd(), entryPoint || '')\n  const program = ts.createProgram(fileVariations(entryFilePath).concat(entryPoint? fileVariations(entryPoint) : []).filter((i) => existsSync(i)), grabConfig(tsConfigPath));\n  const programFileMap: ts.Map<ts.SourceFile> = (program as any).getFilesByNameMap();\n  const sourceFiles: SourceFileKeyMap = {};\n\n  // console.log('program', program.getRootFileNames())\n\n  const fileGraph = traverseFile(sourceFiles, entryFilePath, programFileMap);\n  return { sourceFiles, fileGraph };\n}\n\nfunction grabConfig(tsConfigPath?: string) {\n  if (tsConfigPath) {\n    const tsConfigFilePath = join(process.cwd(), tsConfigPath)\n    try {\n      const tsConfig = require(tsConfigFilePath)\n      if (tsConfig.compilerOptions) {\n        return tsConfig.compilerOptions\n      }\n    } catch (err) {\n      console.log('Could not load tsconfig at', tsConfigFilePath, '\\nPlease ensure there are no comments in the tsconfig supplied\\n\\n')\n      throw err\n    }\n  }\n  return tsConfigCompilerOptions\n}\n\nfunction debugLog(...params: any) {\n  if (logging) {\n    debugLog(...params);\n  }\n}\n\nexport type SourceFileKeyMap = { [key: string]: SourceFile }\n\nexport type SourceFile = {\n  fileName: string,\n  text: string,\n  modules: string[]\n  statements?: Statement[]\n}\n\nexport type FileGraph = {\n  fileName: string,\n  modules: string[]\n}\n\nexport type Statement = {\n  pos: number,\n  end: number,\n  name: string,\n  type: string,\n}\n\nfunction traverseFile(sourceFiles: SourceFileKeyMap, file: string, fileMap: ts.Map<ts.SourceFile>, parentSourceFile?: any, importStatement?: string, prefix: string = ''): FileGraph {\n  const root = findFile(file, fileMap, importStatement);\n\n  if (!root && parentSourceFile && parentSourceFile.resolvedModules.get(importStatement)) {\n    const subProgram = ts.createProgram(fileVariations(file).filter((i) => existsSync(i)), tsConfigCompilerOptions);\n    const subFileMap: ts.Map<ts.SourceFile> = (subProgram as any).getFilesByNameMap();\n    return traverseFile(sourceFiles, file, subFileMap);\n  }\n\n  if (!root) {\n    throw new Error(`Could not find file ${file}`);\n  }\n  if (sourceFiles[file]) {\n    return sourceFiles[file];\n  }\n  const parsedFile: SourceFile = {\n    fileName: root.fileName,\n    text: root.text,\n    modules: [],\n    statements: [],\n  };\n  sourceFiles[file] = parsedFile;\n  root.statements.forEach((statement: any, index) => {\n    debugLog(prefix, 'Index', index);\n    if (statement.moduleSpecifier?.text) {\n      debugLog(prefix, 'statement moduleSpecifier text:', statement.moduleSpecifier.text);\n      try {\n        parsedFile.statements?.push({\n          pos: statement.pos,\n          end: statement.end,\n          name: statement.moduleSpecifier.text,\n          type: 'module',\n        });\n        const modulePath = join(root.fileName, '../', statement.moduleSpecifier.text);\n        parsedFile.modules.push(traverseFile(sourceFiles, modulePath, fileMap, root, statement.moduleSpecifier.text, `${prefix}\\t`).fileName);\n      } catch (err) {\n        console.info(prefix, `Skipped ${statement.moduleSpecifier.text} in ${file}`);\n      }\n    } else if (statement.name?.escapedText) {\n      debugLog(prefix, 'statement name:', statement.name?.escapedText);\n      parsedFile?.statements?.push({\n        pos: statement.pos,\n        end: statement.end,\n        name: statement.name?.escapedText,\n        type: 'statement',\n      });\n    } else if (statement.declarationList?.declarations) {\n      statement.declarationList.declarations.forEach((declaration: ts.Declaration & { name: { escapedText: string }}) => {\n        debugLog(prefix, 'declaration name:', declaration.name?.escapedText);\n        parsedFile?.statements?.push({\n          pos: statement.pos,\n          end: statement.end,\n          name: declaration.name?.escapedText,\n          type: 'declaration',\n        });\n      });\n    } else {\n      debugLog(prefix, 'Missed something', statement);\n    }\n  });\n  return { fileName: parsedFile.fileName, modules: parsedFile.modules };\n}\n\nfunction fileVariations(file: string): string[] {\n  return [\n    file,\n    `${file}.ts`,\n    `${file}.tsx`,\n    file.toLowerCase(),\n    `${file}.ts`.toLowerCase(),\n    `${file}.tsx`.toLowerCase(),\n    join(file, 'index.ts'),\n    join(file, 'index.tsx'),\n    join(file, 'index.ts').toLowerCase(),\n    join(file, 'index.tsx').toLowerCase(),\n  ];\n}\n\nfunction findFile(file: string, fileMap: ts.Map<ts.SourceFile>, importStatement?: string): ts.SourceFile | undefined {\n  let foundFile;\n  if (importStatement) {\n    fileVariations(importStatement).some((filePath) => {\n      foundFile = fileMap.get(filePath);\n      return !!foundFile;\n    });\n  }\n  if (!foundFile) {\n    fileVariations(file).some((filePath) => {\n      foundFile = fileMap.get(filePath);\n      return !!foundFile;\n    });\n  }\n  return foundFile;\n}\n",
    "modules": [],
    "statements": [
      {
        "pos": 0,
        "end": 32,
        "name": "fs",
        "type": "module"
      },
      {
        "pos": 32,
        "end": 61,
        "name": "path",
        "type": "module"
      },
      {
        "pos": 61,
        "end": 96,
        "name": "ts",
        "type": "statement"
      },
      {
        "pos": 96,
        "end": 120,
        "name": "logging",
        "type": "declaration"
      },
      {
        "pos": 120,
        "end": 218,
        "name": "tsConfigCompilerOptions",
        "type": "declaration"
      },
      {
        "pos": 218,
        "end": 891,
        "name": "generateAST",
        "type": "statement"
      },
      {
        "pos": 891,
        "end": 1384,
        "name": "grabConfig",
        "type": "statement"
      },
      {
        "pos": 1384,
        "end": 1469,
        "name": "debugLog",
        "type": "statement"
      },
      {
        "pos": 1469,
        "end": 1531,
        "name": "SourceFileKeyMap",
        "type": "statement"
      },
      {
        "pos": 1531,
        "end": 1644,
        "name": "SourceFile",
        "type": "statement"
      },
      {
        "pos": 1644,
        "end": 1713,
        "name": "FileGraph",
        "type": "statement"
      },
      {
        "pos": 1713,
        "end": 1804,
        "name": "Statement",
        "type": "statement"
      },
      {
        "pos": 1804,
        "end": 4369,
        "name": "traverseFile",
        "type": "statement"
      },
      {
        "pos": 4369,
        "end": 4716,
        "name": "fileVariations",
        "type": "statement"
      },
      {
        "pos": 4716,
        "end": 5181,
        "name": "findFile",
        "type": "statement"
      }
    ]
  },
  "/home/taylor/GitHub/tater-taste/client/src/components/ExploreItem": {
    "fileName": "/home/taylor/GitHub/tater-taste/client/src/components/ExploreItem/index.tsx",
    "text": "import React, { useEffect, useRef, useState } from 'react';\nimport { fabric } from 'fabric';\nimport { SourceFile, SourceFileKeyMap } from '../../../../ast/generateAST'\nimport { getFileNameWithoutExtension, getShortenedFileName, searchSourceFileModules } from '../../utils/sourceFileHelpers'\nimport { calculateTopLeft, getAnchorPoints, onClick, onMove } from '../../utils/fabricHelpers';\nimport Arrow from '../Arrow';\n\nconst cardWidth = 500\nconst cardSpacing = 40\n\nexport default function ExploreItem({ fabricCanvas, pointerState, isReference, isModule, referringModule, parentHeight, parentPosition, topAnchor, bottomAnchor, leftAnchor, rightAnchor, sourceFile, sourceFileKeyMap }:\n  { fabricCanvas: fabric.Canvas, pointerState, isReference?: boolean, isModule?: boolean, referringModule?: string, parentHeight?: number, parentPosition?: { left: number, top: number}, topAnchor?: number, bottomAnchor?: number, leftAnchor?: number, rightAnchor?: number, sourceFile: SourceFile, sourceFileKeyMap: SourceFileKeyMap }) {\n  const groupRef = useRef<fabric.Group>()\n  const positionRef = useRef<{ left: number, top: number }>()\n  const [ expandedReferences, setExpandedReferences ] = useState([])\n  const [ expandedModules, setExpandedModules ] = useState<string[]>([])\n  const [ cardHeight, setCardHeight ] = useState(400)\n  const [ arrow, setArrow ] = useState<{ lineAnchor?: { x: number; y: number; }; arrowPoint: { x: number; y: number; } }>()\n\n  useEffect(() => {\n    if (fabricCanvas && pointerState) {\n      let lineOffset = 20\n      let margin = 20\n      let lineSpacing = 10\n\n      const groupArray = []\n\n      function addLine (text: string, options: fabric.ITextboxOptions, handler?: any) {\n        const textBox = new fabric.Textbox(text, {\n          left: margin,\n          top: lineOffset,\n          width: cardWidth - margin * 2,\n          ...options\n        })\n        if (handler) {\n          onClick(textBox, handler)\n        }\n        groupArray.push(textBox)\n        lineOffset += (options.fontSize || 40) + lineSpacing\n      }\n\n      addLine(getShortenedFileName(sourceFile.fileName), { fontSize: 24, fontWeight: 'bold' }, () => {\n        console.log('clicked title: modal with code?')\n      })\n\n      // Margin below header\n      lineOffset += 20\n\n      const references = searchSourceFileModules(sourceFileKeyMap, sourceFile.fileName)\n\n      addLine('References:', { fontSize: 18 }, () => {\n        if (expandedReferences.length === references.filter(i => i !== referringModule).length) {\n          setExpandedReferences([])\n        } else {\n          const newExpandedReferences = [...expandedReferences]\n          references.forEach(reference => {\n            if (!expandedReferences.includes(reference)) {\n              newExpandedReferences.push(reference)\n            }\n          })\n          setExpandedReferences(newExpandedReferences.filter(i => i !== referringModule))\n        }\n      })\n\n      references.filter(i => i !== referringModule).forEach((reference, index) => {\n        addLine(`  ${getShortenedFileName(reference)}`, { fontSize: 16, backgroundColor: index % 2 === 0 ? '#eee' : undefined }, () => {\n          toggleReference(reference)\n        })\n      })\n\n      addLine('Modules:', { fontSize: 18 }, () => {\n        if (expandedModules.length === sourceFile.modules.filter(i => i !== referringModule).length) {\n          setExpandedModules([])\n        } else {\n          const newExpandedModules = [...expandedModules]\n          sourceFile.modules.forEach(module => {\n            if (!expandedModules.includes(module)) {\n              newExpandedModules.push(module)\n            }\n          })\n          setExpandedModules(newExpandedModules.filter(i => i !== referringModule))\n        }\n      })\n\n      sourceFile.modules.filter(i => i !== referringModule).forEach((module, index) => {\n        addLine(`  ${getShortenedFileName(module)}`, {\n          fontSize: 16,\n          backgroundColor: index % 2 === 0 ? '#eee' : undefined\n        }, () => {\n          toggleModule(module)\n        })\n      })\n\n      // Bottom margin for card\n      lineOffset += 20\n\n      const card = new fabric.Rect({\n        height: lineOffset,\n        width: cardWidth,\n        fill: '#fff',\n        rx: 10,\n        ry: 10,\n        shadow: new fabric.Shadow({\n          blur: 10,\n        })\n      });\n\n      setCardHeight(lineOffset)\n      if (!positionRef.current) {\n        positionRef.current = calculateTopLeft(fabricCanvas, cardWidth + 30, lineOffset, topAnchor, bottomAnchor, leftAnchor, rightAnchor)\n      }\n\n      const group = new fabric.Group([card, ...groupArray], {\n        hasControls: false,\n        left: positionRef.current.left,\n        top: positionRef.current.top,\n        subTargetCheck: true\n      });\n      groupRef.current = group\n\n      onMove(group, () => {\n        positionRef.current = { left: group.left, top: group.top }\n        setArrow(getAnchorPoints({\n          isModule,\n          cardWidth,\n          parentHeight,\n          parentPosition,\n          currentHeight: cardHeight,\n          currentPosition: positionRef.current\n        }))\n      })\n      fabricCanvas.add(group)\n      return () => {\n        fabricCanvas.remove(group)\n      }\n    }\n  }, [fabricCanvas, pointerState, expandedModules, expandedReferences])\n\n  useEffect(() => {\n    setArrow(getAnchorPoints({\n      isModule,\n      cardWidth,\n      parentHeight,\n      parentPosition,\n      currentHeight: cardHeight,\n      currentPosition: positionRef.current\n    }))\n  }, [parentPosition, isModule, positionRef.current])\n\n  function toggleReference (referenceName: string) {\n    if (expandedReferences.includes(referenceName)) {\n      const newExpandedReferences = [...expandedReferences].filter(i => i !== referenceName)\n      setExpandedReferences(newExpandedReferences.filter(i => i !== referringModule))\n    } else {\n      const newExpandedReferences = [...expandedReferences]\n      newExpandedReferences.push(referenceName)\n      setExpandedReferences(newExpandedReferences.filter(i => i !== referringModule))\n    }\n  }\n\n  function toggleModule (moduleName: string) {\n    if (expandedModules.includes(moduleName)) {\n      const newExpandedModules = [...expandedModules].filter(i => i !== moduleName)\n      setExpandedModules(newExpandedModules.filter(i => i !== referringModule))\n    } else {\n      const newExpandedModules = [...expandedModules]\n      newExpandedModules.push(moduleName)\n      setExpandedModules(newExpandedModules.filter(i => i !== referringModule))\n    }\n  }\n\n  return <>\n    {parentPosition && positionRef.current && <Arrow\n      fabricCanvas={fabricCanvas}\n      // If it is a reference, reverse the direction of the arrow\n      lineAnchor={isModule ? arrow.lineAnchor : arrow.arrowPoint}\n      arrowPoint={isModule ? arrow.arrowPoint : arrow.lineAnchor} />}\n    {expandedReferences.map((reference, index) => <ExploreItem key={reference}\n      isReference\n      referringModule={sourceFile.fileName}\n      leftAnchor={isModule ? positionRef.current.left + cardWidth + cardSpacing + index * (10 + cardWidth): positionRef.current.left + index * (10 + cardWidth)}\n      bottomAnchor={positionRef.current.top - cardSpacing}\n      parentHeight={cardHeight}\n      parentPosition={positionRef.current}\n      sourceFileKeyMap={sourceFileKeyMap}\n      fabricCanvas={fabricCanvas}\n      pointerState={pointerState}\n      sourceFile={sourceFileKeyMap[getFileNameWithoutExtension(sourceFileKeyMap, reference)]} />)}\n    {expandedModules.map((module, index) => <ExploreItem key={module}\n      isModule\n      referringModule={sourceFile.fileName}\n      leftAnchor={isReference ? positionRef.current.left + cardWidth + cardSpacing + index * (10 + cardWidth) : positionRef.current.left + index * (10 + cardWidth)}\n      topAnchor={positionRef.current.top + cardHeight + cardSpacing}\n      parentHeight={cardHeight}\n      parentPosition={positionRef.current}\n      sourceFileKeyMap={sourceFileKeyMap}\n      fabricCanvas={fabricCanvas}\n      pointerState={pointerState}\n      sourceFile={sourceFileKeyMap[getFileNameWithoutExtension(sourceFileKeyMap, module)]} />)}\n  </>\n}\n",
    "modules": [
      "/home/taylor/GitHub/tater-taste/ast/generateAST.ts",
      "/home/taylor/GitHub/tater-taste/client/src/utils/sourceFileHelpers.ts",
      "/home/taylor/GitHub/tater-taste/client/src/utils/fabricHelpers.ts",
      "/home/taylor/GitHub/tater-taste/client/src/components/Arrow/index.tsx"
    ],
    "statements": [
      {
        "pos": 0,
        "end": 59,
        "name": "react",
        "type": "module"
      },
      {
        "pos": 59,
        "end": 92,
        "name": "fabric",
        "type": "module"
      },
      {
        "pos": 92,
        "end": 167,
        "name": "../../../../ast/generateAST",
        "type": "module"
      },
      {
        "pos": 167,
        "end": 290,
        "name": "../../utils/sourceFileHelpers",
        "type": "module"
      },
      {
        "pos": 290,
        "end": 386,
        "name": "../../utils/fabricHelpers",
        "type": "module"
      },
      {
        "pos": 386,
        "end": 416,
        "name": "../Arrow",
        "type": "module"
      },
      {
        "pos": 416,
        "end": 439,
        "name": "cardWidth",
        "type": "declaration"
      },
      {
        "pos": 439,
        "end": 462,
        "name": "cardSpacing",
        "type": "declaration"
      },
      {
        "pos": 462,
        "end": 8095,
        "name": "ExploreItem",
        "type": "statement"
      }
    ]
  },
  "/home/taylor/GitHub/tater-taste/client/src/utils/sourceFileHelpers": {
    "fileName": "/home/taylor/GitHub/tater-taste/client/src/utils/sourceFileHelpers.ts",
    "text": "import { SourceFile, SourceFileKeyMap } from \"../../../ast/generateAST\"\n\nexport function getFileNameWithoutExtension (sourceFileKeyMap: SourceFileKeyMap, fileName: string): string {\n  if (sourceFileKeyMap[fileName]) {\n    return fileName\n  }\n  let shortened = fileName.replace(/(.*)\\..*/, '$1')\n  if (sourceFileKeyMap[shortened]) {\n    return shortened\n  }\n  shortened = fileName.replace(/(.*)\\/.*/, '$1')\n  if (sourceFileKeyMap[shortened]) {\n    return shortened\n  }\n  throw new Error(`Could not find file ${fileName}`)\n}\n\nexport function getShortenedFileName (fileName: string): string {\n  const match = fileName.match(/([^/]*)\\/*([^/]*)\\/*([^/]*)$/)\n  if (match) {\n    return match.slice(1).filter(i => i).join('/')\n  } else {\n    return fileName\n  }\n}\n\nfunction matchFileText (sourceFile: SourceFile, searchString: string): boolean {\n  return searchString.split(' ').every(searchText => {\n    const regex = new RegExp(searchText.replace(/([^a-z0-9])/gi, '\\\\$1'))\n    if (regex.test(sourceFile.fileName)) {\n      return true\n    }\n    if (regex.test(sourceFile.text)) {\n      return true\n    }\n  })\n}\n\nexport function searchSourceFileText (sourceFileKeyMap: SourceFileKeyMap, searchText: string) {\n  return Object.values(sourceFileKeyMap).reduce((accumulator, sourceFile) => {\n    if (matchFileText(sourceFile, searchText)) {\n      accumulator.push(sourceFile.fileName)\n      return accumulator\n    } else {\n      return accumulator\n    }\n  }, [])\n}\n\nexport function searchSourceFileModules (sourceFileKeyMap: SourceFileKeyMap, fileName: string) {\n  return Object.values(sourceFileKeyMap).reduce((accumulator, sourceFile) => {\n    if (sourceFile.modules.includes(fileName)) {\n      accumulator.push(sourceFile.fileName)\n      return accumulator\n    } else {\n      return accumulator\n    }\n  }, [])\n}\n",
    "modules": [
      "/home/taylor/GitHub/tater-taste/ast/generateAST.ts"
    ],
    "statements": [
      {
        "pos": 0,
        "end": 71,
        "name": "../../../ast/generateAST",
        "type": "module"
      },
      {
        "pos": 71,
        "end": 522,
        "name": "getFileNameWithoutExtension",
        "type": "statement"
      },
      {
        "pos": 522,
        "end": 755,
        "name": "getShortenedFileName",
        "type": "statement"
      },
      {
        "pos": 755,
        "end": 1103,
        "name": "matchFileText",
        "type": "statement"
      },
      {
        "pos": 1103,
        "end": 1452,
        "name": "searchSourceFileText",
        "type": "statement"
      },
      {
        "pos": 1452,
        "end": 1802,
        "name": "searchSourceFileModules",
        "type": "statement"
      }
    ]
  },
  "/home/taylor/GitHub/tater-taste/client/src/utils/fabricHelpers": {
    "fileName": "/home/taylor/GitHub/tater-taste/client/src/utils/fabricHelpers.ts",
    "text": "export function addToGroup (fabricCanvas: fabric.Canvas, pointerState, group: fabric.Group, createItem: (xOffset: number, yOffset: number) => fabric.Object) {\n  const offset = getObjectOffset(pointerState, group)\n  group.addWithUpdate(createItem(offset.x, offset.y))\n  fabricCanvas.requestRenderAll()\n}\n\n// setTimeout(() => {\n//   addToGroup(fabricCanvas, pointerState, group, (x, y) => new fabric.Textbox('Other stuff', {\n//     left: x + 30,\n//     top: y + 30,\n//     width: 170,\n//     fontSize: 20,\n//   }))\n// }, 1000)\n\nexport function getObjectOffset (pointerState, fabricObject: fabric.Object): { x: number, y: number } {\n  const coords = fabricObject.calcCoords().tl\n  return { x: coords.x - pointerState.relativeX, y: coords.y - pointerState.relativeY }\n}\n\nexport function calculateTopLeft (fabricCanvas: fabric.Canvas, cardWidth: number, cardHeight: number, topAnchor?: number, bottomAnchor?: number, leftAnchor?: number, rightAnchor?: number): { top: number, left: number } {\n  if (!fabricCanvas) return\n  let top\n  let left\n\n  if (typeof(topAnchor) !== 'undefined') {\n    top = topAnchor\n  } else if (typeof(bottomAnchor) !== 'undefined') {\n    top = bottomAnchor - cardHeight\n  } else {\n    top = Math.floor((fabricCanvas.height - cardHeight) / 4)\n  }\n\n  if (typeof(leftAnchor) !== 'undefined') {\n    left = leftAnchor\n  } else if (typeof(rightAnchor) !== 'undefined') {\n    left = rightAnchor - cardWidth\n  } else {\n    left = Math.floor((fabricCanvas.width - cardWidth) / 2)\n  }\n\n  return { top, left }\n}\n\nexport function onMove (fabricObject: fabric.Object, callback: Function) {\n  let down = false\n  fabricObject.on('mousedown', () => {\n    down = true\n  })\n  fabricObject.on('mousemove', () => {\n    if (down) {\n      callback()\n    }\n  })\n  fabricObject.on('mouseup', () => {\n    down = false\n  })\n}\n\nexport function onClick (fabricObject: fabric.Object, callback: Function) {\n  let down = false\n  fabricObject.on('mousedown', () => {\n    down = true\n  })\n  fabricObject.on('mousemove', () => {\n    down = false\n  })\n  fabricObject.on('mouseup', () => {\n    if (down) {\n      callback()\n    }\n    down = false\n  })\n}\n\ntype AnchorPoints = {\n  lineAnchor?: {\n    x: number,\n    y: number\n  },\n  arrowPoint: {\n    x: number,\n    y: number\n  }\n}\n\nconst offsetFromCard = 10\n\nexport function getAnchorPoints ({\n  isModule,\n  cardWidth,\n  parentHeight,\n  parentPosition,\n  currentHeight,\n  currentPosition\n}: {\n  isModule: boolean,\n  cardWidth: number,\n  parentHeight: number,\n  parentPosition: { left: number, top: number },\n  currentHeight: number,\n  currentPosition: { left: number, top: number }\n}): AnchorPoints {\n  if (!currentPosition) return\n  \n  const res: AnchorPoints = {\n    arrowPoint: {\n      x: currentPosition.left + cardWidth / 2,\n      // if it's a module use the top of the card: else use the bottom\n      y: isModule ? currentPosition.top - offsetFromCard : currentHeight + currentPosition.top + offsetFromCard\n    }\n  }\n\n  if (!parentPosition) return res\n\n  res.lineAnchor = {\n    x: parentPosition.left + cardWidth / 2,\n    // if it's a module use the bottom of the parent card: else use the top\n    y: isModule ? parentHeight + parentPosition.top + offsetFromCard : parentPosition.top - offsetFromCard\n  }\n\n  return res\n}\n",
    "modules": [],
    "statements": [
      {
        "pos": 0,
        "end": 302,
        "name": "addToGroup",
        "type": "statement"
      },
      {
        "pos": 302,
        "end": 765,
        "name": "getObjectOffset",
        "type": "statement"
      },
      {
        "pos": 765,
        "end": 1520,
        "name": "calculateTopLeft",
        "type": "statement"
      },
      {
        "pos": 1520,
        "end": 1819,
        "name": "onMove",
        "type": "statement"
      },
      {
        "pos": 1819,
        "end": 2136,
        "name": "onClick",
        "type": "statement"
      },
      {
        "pos": 2136,
        "end": 2261,
        "name": "AnchorPoints",
        "type": "statement"
      },
      {
        "pos": 2261,
        "end": 2288,
        "name": "offsetFromCard",
        "type": "declaration"
      },
      {
        "pos": 2288,
        "end": 3257,
        "name": "getAnchorPoints",
        "type": "statement"
      }
    ]
  },
  "/home/taylor/GitHub/tater-taste/client/src/components/Arrow": {
    "fileName": "/home/taylor/GitHub/tater-taste/client/src/components/Arrow/index.tsx",
    "text": "import { useEffect } from \"react\"\nimport { fabric } from \"fabric\"\n\n// {parentPosition && <Arrow fabricCanvas={fabricCanvas} isModule={isModule} parentHeight={parentHeight} parentPosition={parentPosition} currentPosition={positionRef.current} currentHeight={cardHeight} />}\n\nexport default function Arrow ({\n  fabricCanvas,\n  lineAnchor,\n  arrowPoint\n}: {\n  fabricCanvas: fabric.Canvas,\n  lineAnchor: { x: number, y: number },\n  arrowPoint: { x: number, y: number }\n}) {\n  useEffect(() => {\n    if (!lineAnchor || !arrowPoint) return\n    // const arrowIsLeft = arrowPoint.x < lineAnchor.x\n    const arrowIsBelow = arrowPoint.y < lineAnchor.y\n    // const offset = (arrowPoint.y - lineAnchor.y) / 2\n    const midY = (arrowPoint.y - lineAnchor.y) / 2 + lineAnchor.y\n    const midX = (arrowPoint.x - lineAnchor.x) / 2 + lineAnchor.x\n    const line = new fabric.Path(`\n    M ${lineAnchor.x} ${lineAnchor.y}\n    Q ${lineAnchor.x}, ${midY}, ${midX}, ${midY}\n    M ${midX} ${midY}\n    Q ${arrowPoint.x}, ${midY}, ${arrowPoint.x}, ${arrowPoint.y}\n    M ${arrowPoint.x - 8} ${arrowPoint.y}\n    Q ${arrowPoint.x - 8}, ${arrowPoint.y}, ${arrowPoint.x}, ${arrowIsBelow ? arrowPoint.y - 8 : arrowPoint.y + 8}\n    M ${arrowPoint.x + 8} ${arrowPoint.y}\n    Q ${arrowPoint.x + 8}, ${arrowPoint.y}, ${arrowPoint.x}, ${arrowIsBelow ? arrowPoint.y - 8 : arrowPoint.y + 8}\n    `, {\n      fill: '', stroke: 'black', strokeWidth: 3, strokeLineCap: 'round', selectable: false\n    })\n    // const line = new fabric.Path(`M ${lineAnchor.x} ${lineAnchor.y} Q ${lineAnchor.x}, ${midY}, ${arrowPoint.x}, ${arrowPoint.y}`, { fill: '', stroke: 'black', hasControls: false, lockMovementX: true, lockMovementY: true })\n    // const line1 = new fabric.Path(`M ${lineAnchor.x} ${lineAnchor.y} Q ${arrowPoint.x}, ${arrowIsBelow ? lineAnchor.y + offset : lineAnchor.y - offset}, ${arrowIsLeft ? lineAnchor.x - offset : lineAnchor.x + offset}, ${arrowIsBelow ? lineAnchor.y + offset : lineAnchor.y - offset}`, { fill: '', stroke: 'black' })\n    // const line2 = new fabric.Path(`M ${arrowPoint.x} ${arrowPoint.y} Q ${arrowPoint.x}, ${arrowIsBelow ? arrowPoint.y - offset : arrowPoint.y + offset}, ${arrowIsLeft ? arrowPoint.x - offset: arrowPoint.x + offset}, ${arrowIsBelow ? arrowPoint.y - offset : arrowPoint.y + offset}`, { fill: '', stroke: 'black' })\n    // const straightLine = new fabric.Line([lineAnchor.x + offset, midY, arrowPoint.x - offset, midY], { fill: '', stroke: 'black' })\n    fabricCanvas.add(line)\n    // fabricCanvas.add(line1)\n    // fabricCanvas.add(line2)\n    // fabricCanvas.add(straightLine)\n    return () => {\n      fabricCanvas.remove(line)\n      // fabricCanvas.remove(line1)\n      // fabricCanvas.remove(line2)\n      // fabricCanvas.remove(straightLine)\n    }\n  }, [lineAnchor, arrowPoint])\n\n  return null\n}\n",
    "modules": [],
    "statements": [
      {
        "pos": 0,
        "end": 33,
        "name": "react",
        "type": "module"
      },
      {
        "pos": 33,
        "end": 65,
        "name": "fabric",
        "type": "module"
      },
      {
        "pos": 65,
        "end": 2800,
        "name": "Arrow",
        "type": "statement"
      }
    ]
  },
  "/home/taylor/GitHub/tater-taste/client/src/components/FabricCanvas": {
    "fileName": "/home/taylor/GitHub/tater-taste/client/src/components/FabricCanvas/index.tsx",
    "text": "import React, { useRef } from 'react'\nimport { fabric } from \"fabric\"\nimport { useEffect } from 'react'\nimport { css } from '@emotion/css'\n\nexport default function FabricCanvas ({ registerFabricCanvas, registerPointerState }) {\n  const canvasContainerRef = useRef<HTMLDivElement>()\n  const pointerState = useRef({ pan: false, x: 0, y: 0, relativeX: 0, relativeY: 0 })\n  const canvasRef = useRef()\n  const fabricRef = useRef<fabric.Canvas>()\n\n  useEffect(() => {\n    if (canvasRef.current) {\n      fabricRef.current = new fabric.Canvas(canvasRef.current)\n    }\n  }, [canvasRef])\n\n  useEffect(() => {\n    registerFabricCanvas(fabricRef.current)\n    resizeCanvas()\n  }, [fabricRef])\n\n  useEffect(() => {\n    registerPointerState(pointerState.current)\n  }, [pointerState])\n\n  useEffect(() => {\n    if (canvasContainerRef.current) {\n      window.addEventListener('resize', resizeCanvas)\n      return () => {\n        window.removeEventListener('resize', resizeCanvas)\n      }\n    }\n  }, [canvasContainerRef])\n\n  function resizeCanvas () {\n    if (fabricRef.current) {\n      fabricRef.current.setWidth(canvasContainerRef.current.clientWidth)\n      fabricRef.current.setHeight(canvasContainerRef.current.clientHeight)\n      fabricRef.current.calcOffset()\n    }\n  }\n\n  function startPan(event) {\n    if (event.button === 2) {\n      pointerState.current.pan = true\n      pointerState.current.x = event.screenX\n      pointerState.current.y = event.screenY\n    }\n  }\n\n  function stopPan(event) {\n    pan(event)\n    pointerState.current.pan = false\n  }\n\n  function pan(event) {\n    if (pointerState.current.pan) {\n      if (fabricRef.current) {\n        pointerState.current.relativeX += event.screenX - pointerState.current.x\n        pointerState.current.relativeY += event.screenY - pointerState.current.y\n        fabricRef.current.relativePan({ x: event.screenX - pointerState.current.x, y: event.screenY - pointerState.current.y })\n      }\n      pointerState.current.x = event.screenX\n      pointerState.current.y = event.screenY\n    }\n  }\n\n  return (\n    <div className={css`\n      flex-grow: 1;\n    `} ref={canvasContainerRef}\n      onWheel={event => {\n        fabricRef.current.relativePan({ x: 0, y: -1 * event.deltaY })\n      }}\n      onContextMenu={e => e.preventDefault()}\n      onMouseDown={startPan}\n      onMouseUp={stopPan}\n      onMouseLeave={stopPan}\n      onMouseMove={pan} >\n      <canvas ref={canvasRef} />\n    </div>\n  )\n}\n",
    "modules": [],
    "statements": [
      {
        "pos": 0,
        "end": 37,
        "name": "react",
        "type": "module"
      },
      {
        "pos": 37,
        "end": 69,
        "name": "fabric",
        "type": "module"
      },
      {
        "pos": 69,
        "end": 103,
        "name": "react",
        "type": "module"
      },
      {
        "pos": 103,
        "end": 138,
        "name": "@emotion/css",
        "type": "module"
      },
      {
        "pos": 138,
        "end": 2429,
        "name": "FabricCanvas",
        "type": "statement"
      }
    ]
  },
  "/home/taylor/GitHub/tater-taste/client/src/components/SearchResult": {
    "fileName": "/home/taylor/GitHub/tater-taste/client/src/components/SearchResult/index.tsx",
    "text": "import React, { useState } from 'react';\nimport { css } from '@emotion/css'\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport Accordion from '@mui/material/Accordion';\nimport AccordionSummary from '@mui/material/AccordionSummary';\nimport AccordionDetails from '@mui/material/AccordionDetails';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport { SourceFile } from '../../../../ast/generateAST'\n\nexport default function SearchResult({ sourceFile, expandModule, collapseModule }: { sourceFile: SourceFile, expandModule: Function, collapseModule?: Function }) {\n  return (\n    <>\n      <Card className={css`\n        margin: 10px;\n        position: relative;\n      `} sx={{ minWidth: 275, maxWidth: 800 }}>\n        <CardContent>\n          <Accordion>\n            <AccordionSummary\n              expandIcon={<ExpandMoreIcon />}\n              aria-controls=\"panel1a-content\"\n              id=\"panel1a-header\"\n            >\n              <h3>File: {sourceFile.fileName}</h3>\n            </AccordionSummary>\n            <AccordionDetails>\n              <div>\n                {sourceFile.text.split(/\\n/).map((line, index) => {\n                  const elements = line.split(/  |\\t/).slice(1)\n                  return (\n                    <div key={index}>\n                      {elements.map((_, id) => <span key={`${index}-${id}`}>&nbsp;&nbsp;</span>)}\n                      <span>{line}</span>\n                    </div>\n                  )\n                })}\n              </div>\n            </AccordionDetails>\n          </Accordion>\n          {collapseModule ? <div className={css`\n            cursor: pointer;\n            background: gray;\n            position: absolute;\n            top: 10px;\n            right: 10px;\n            padding: 10px;\n          `} onClick={() => collapseModule(sourceFile.fileName)}>\n            Collapse\n          </div> : undefined}\n        </CardContent>\n        <CardActions className={css`\n          display: flex;\n          flex-direction: column;\n          align-items: flex-start !important;\n        `}>\n          <h3 className={css`\n            margin: 0px 10px;\n          `}>{sourceFile.modules.length ? 'Modules:' : 'No Modules'}</h3>\n          {sourceFile.modules.map(modulePath => {\n            return <div key={modulePath} className={css`\n              cursor: pointer;\n              color: blue;\n              margin: 10px;\n            `} onClick={() => {\n              expandModule(modulePath)\n            }}>{modulePath}</div>\n          })}\n        </CardActions>\n      </Card>\n    </>\n  )\n}\n",
    "modules": [
      "/home/taylor/GitHub/tater-taste/ast/generateAST.ts"
    ],
    "statements": [
      {
        "pos": 0,
        "end": 40,
        "name": "react",
        "type": "module"
      },
      {
        "pos": 40,
        "end": 75,
        "name": "@emotion/css",
        "type": "module"
      },
      {
        "pos": 75,
        "end": 114,
        "name": "@mui/material/Card",
        "type": "module"
      },
      {
        "pos": 114,
        "end": 167,
        "name": "@mui/material/CardActions",
        "type": "module"
      },
      {
        "pos": 167,
        "end": 220,
        "name": "@mui/material/CardContent",
        "type": "module"
      },
      {
        "pos": 220,
        "end": 269,
        "name": "@mui/material/Accordion",
        "type": "module"
      },
      {
        "pos": 269,
        "end": 332,
        "name": "@mui/material/AccordionSummary",
        "type": "module"
      },
      {
        "pos": 332,
        "end": 395,
        "name": "@mui/material/AccordionDetails",
        "type": "module"
      },
      {
        "pos": 395,
        "end": 456,
        "name": "@mui/icons-material/ExpandMore",
        "type": "module"
      },
      {
        "pos": 456,
        "end": 513,
        "name": "../../../../ast/generateAST",
        "type": "module"
      },
      {
        "pos": 513,
        "end": 2656,
        "name": "SearchResult",
        "type": "statement"
      }
    ]
  }
}